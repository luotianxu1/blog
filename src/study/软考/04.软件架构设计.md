---
title: 软件架构设计
icon: sheji
order: 4
date: 2024-07-05
category:
    - 软考
tag:
    - 软考
---


## 软件架构的概念

软件架构 = 软件体系结构

架构设计就是需求分配，即将满足需求的职责分配到组件上

## 架构的本质

1. 软件架构为软件系统提供了一个结构、行为和属性的高级抽象
2. 软件架构风格是特定应用领域的惯用模式，架构定义一个词汇表和一组约束

## 架构的作用

1. 软件架构是项目干系人进行交流的手段
2. 软件架构是可传递和可复用的模型，通过研究软件架构可能预测软件的质量
3. 软件架构使推理和控制的更改更加简单，有助于循序渐进的原型设计，可以作为培训的基础

## 架构的发展历程

1. 无架构阶段 汇编语言
2. 萌芽阶段 程序结构设计
3. 初级阶段 统一建模语言
4. 高级阶段 4+1视图

## 架构的4+1视图

![ ](/img/softExamination/41.jpg)

## 软件架构风格

### ADL

ADL是这样一种形式化语言，它再底层予以模型的支持下，为软件系统的概念体系结构建模提供了具体语法和概念框架。如：Aesop、MetaH、C2等

ADL的三个基本元素

- 构件：计算或数据存储单元
- 连接件：用于构件之间交互建模的体系结构构造块及其支配这些交互的规则
- 架构配置：描述体系结构的构件与链接件的连接图

## 基于架构的软件开发方法

### 概念

- ABSD方法是架构驱动，即强调由业务、质量和功能需求的组合驱动架构设计
- ABSD方法有三个基础。第一个基础是功能的分解。在功能分解中，ABSD方法使用已有的基于模块的内聚和耦合技术；第二个基础是通过选择架构风格来实现质量和业务需求；第三个基础是软件模板的使用
- 视角与视图：从不同的视角来检查，所以会有不同的视图
- 用例用来捕获功能需求、特定场景用来捕获质量需求

### 开发过程

![ ](/img/softExamination/42.jpg)

## 软件架构风格

架构风格定义了用于描述系统的术语表和一组指导构建系统的规则

![ ](/img/softExamination/47.jpg)

### 数据流风格

![ ](/img/softExamination/48.jpg)

批处理序列：大量整体数据、无需用户交互
管道-过滤器：流式数据、弱用户交互

#### 优点

1. 松耦合【高内聚-低耦合】
2. 良好的重用性/可维护性
3. 可扩展性【标准接口适配】
4. 良好的隐蔽性
5. 支持并行

#### 缺点

1. 交互性较差
2. 复杂性较高
3. 性能较差（每个过滤器都需要解析与合成数据）

#### 典型实例

传统编译器、网络报文处理

### 调用/返回风格

![ ](/img/softExamination/49.jpg)

#### 优点

1. 良好的重用性，只要接口不变可用在其它处
2. 可维护性好
3. 可扩展性好，支持递增设计

#### 缺点

1. 并不是每个系统都方便分层
2. 很难找到一个合适的、正确的层次抽象方法
3. 不同层次之间耦合度高的系统很难实现

#### 特点

各个层次的组件形成不同功能级别的虚拟机；
多层相互协同工作，而且实现透明

### 独立构件风格

![ ](/img/softExamination/50.jpg)

#### 优点

1. 松耦合
2. 良好的重用性/可修改性/可扩展性

#### 缺点

1. 构件放弃了对系统计算的控制。一个构件触发一个事件时，不能确定其他构件是否会响应它。而且即使它知道事件注册了哪些构件的过程，它也不能保证这些过程被调用的顺序。
2. 数据交换的问题
3. 既然过程的语义必须依赖于被处罚事件的上下文约束，关于正确性的推理就存在问题

#### 特点

系统由若干子系统构成且成为一个整体；系统有统一的目标；子系统有主从之分；每一子系统有自己的事件收集和处理机制

### 事件处理器风格

![ ](/img/softExamination/51.jpg)

### 虚拟机风格

![ ](/img/softExamination/52.jpg)
![ ](/img/softExamination/53.jpg)

#### 解释器架构风格

![ ](/img/softExamination/54.jpg)

#### 规则系统体系结构风格

基于规则的系统构成：规则集、规则解释器、规则/数据选择及工作内存，一般用在人工智能领域和DSS（决策系统）中
![ ](/img/softExamination/55.jpg)

### 仓库风格

![ ](/img/softExamination/56.jpg)
![ ](/img/softExamination/57.jpg)

### 闭环控制风格（过程控制）

![ ](/img/softExamination/58.jpg)

适用于嵌入式系统，用于解决简单闭环控制问题
经典应用：空调温控，定速巡航

### C2架构风格

![ ](/img/softExamination/59.jpg)

基本规则

- 构件和连接件都有一个顶部和一个底部
- 构件的顶部要连接到连接件的底部，构件的地步要连接到连接件的顶部，构件之间不允许直连
- 一个连接件可以和任意数目和其他构件和连接件连接
- 当两个连接件进行直接连接时，必须由其中一个的底部到另一个的顶部

### MDA

- 平台独立模型：具有高抽象层次、独立于任何实现技术的模型
- 平台相关模型：为某种特定实现技术量身定做，让你用这种技术中可用的实现构造来描述系统的模型。PIM会被换变换成一个或多个PSM
- 代码Code：用源代码对系统的描述（规约）。每个PSM都将被变换成代码

## 特定领域软件架构（DSSA）

### 基本概念

定义：特定领域软件架构以一个特定问题领域为对象，形成领域参考模型、参考需求、参考架构等组成的开发基础架构，支持一个特定领域中多个应用的生成

![ ](/img/softExamination/43.jpg)

### 参与人员

![ ](/img/softExamination/44.jpg)

### 建立过程

![ ](/img/softExamination/45.jpg)

### 三层次模型

![ ](/img/softExamination/46.jpg)

## 软件架构评估

### 质量属性

![ ](/img/softExamination/60.jpg)

### 性能

性能是指系统的相应能力，即要经过多长时间才能对某个事件做出响应，或者在某段时间内系统所能处理的事件的个数

例如：

- 同时支持1000并发
- 响应时间小于1s
- 显示分辨率达到4k

![ ](/img/softExamination/61.jpg)

### 可用性

可用性是系统能够正常运行的时间比例。经常用两次故障之间的时间长度或者出现故障时能够恢复正常的速度来表示

例如：

- 主服务器故障，1分钟内切换至备用服务器
- 系统故障，1小时内修改
- 系统支持7*24小时工作

![ ](/img/softExamination/62.jpg)

### 安全性

安全性是指系统在向合法用户提供服务的同时能够阻止非授权用户使用的企图或拒绝服务的能力。安全性又可划分为机密性【信息不泄露给未授权的用户】、完整性【防止信息被篡改】、不可否认性【不可抵赖】及可控性【对信息的传播及内容具有控制的能力】等特性

例如：

- 可抵御SQL注入攻击
- 对计算机的操作都有完整记录
- 用户信息数据库授权必须保证99.9%可用

![ ](/img/softExamination/63.jpg)

### 可修改性

可修改性是指能够快读地以较高的性能价格比对系统进行变更能力。通常以某些具体的变更为基准，通过考察这些变更的代价衡量可修改性

例如：

- 更改系统报表模块，必须在2人周内完成
- 对web界面风格进行修改，修改必须在4人月内完成

![ ](/img/softExamination/64.jpg)

### 易用性

易用性关注的是对用户来说完成某个期望任务的容易程度和系统所提供的用户支持的种类

例如

- 界面友好
- 新用户学习使用系统时间不超过2小时

### 可测试性

软件可测试性是通过测试揭示软件缺陷的容易程度

例如：

- 提供远程调试接口，支持远程调试

## 软件架构评估

- 敏感点是一个或多个构件（和/或构件之间的关系）的特征
- 权衡点是影响多个质量属性的特征，是多个质量属性的敏感点
- 风险点是指架构设计中潜在的、存在问题的架构决策所带来的隐患
- 非风险点是指不会带来隐患，一般以“XXX要求是可以实现（或接收）的”方式表达

例如：

1. 对交易请求处理时间的要求将影响系统的数据传输协议和处理过程的设计
2. 假设每秒中用户交易请求的数量是10个，处理请求的时间为30毫秒，则“在1秒内完成用户的交易请求”这一要求是可以实现的
3. 目前对系统信用卡支付业务逻辑的描述尚未达成共识，这可能导致部分业务功能模块的重复，影响系统的可修改性
4. 更改加密的级别将对安全性和性能产生影响

### 评估方法

- 基于调查问卷（检查表）的方式
- 基于度量的方式
- 基于场景的方式

![ ](/img/softExamination/65.jpg)

【场景】是从风险承担者的角度与系统交互的简短描述
场景可从六个方面进行描述：刺激源、刺激、制品、环境、响应、响应度量

【性能场景示例】

![ ](/img/softExamination/66.jpg)

【软件架构分析法（SAAM）】
最初关注可修改性，后扩充到可移植性、可扩充性等

![ ](/img/softExamination/67.jpg)

【架构权衡分析法（ATAM）】
在SAAM发展而来，主要针对：性能、实用性、安全性可修改性，在系统开发之前，对则这些质量属性进行评价和折中
![ ](/img/softExamination/68.jpg)

【成本效益分析法（CBAM）】
在ATAM基础上建立的，软件的“经济”模型

## 质量效用树

![ ](/img/softExamination/69.jpg)

## 软件产品线

### 概念

![ ](/img/softExamination/70.jpg)

### 双生命周期模型

![ ](/img/softExamination/71.jpg)

### 建立产品线

![ ](/img/softExamination/72.jpg)

- 将现有产品演化为产品线
- 用软件产品线替代现有产品集
- 全新软件产品线的演化
- 全新软件产品线的开发

组织结构类型

- 设立独立的核心资源小组
- 不设立独立的核心资源小组
- 动态的组织结构

要成功实施产品线，主要取决于以下因素

- 对该领域具备长期和深厚的经验
- 一个用于构建产品的好的核心资源库
- 好的产品线架构
- 好的管理（软件资源、人员组织、过程）支持

## 构件与中间件技术

### 构件

#### 构件概念

- 定义1：软件构件是一种组装单元，它具有规范的接口规约和显示的语境依赖。软件构件可以被独立地部署并由第三方任意地组装
- 定义2：构件是某系统中有价值的、几乎独立的并可替换的一个部分，它在良好定义的体系结构语境内满足某清晰的功能
- 定义3：构件是一个独立发布的功能部分，可以通过其接口访问它的服务

![ ](/img/softExamination/74.jpg)

#### 构件特征

- 构件系统体系结构由一组平台决策、一组构件框架和构件框架之间的互操作设计组成
- 构件框架是一种专门的体系结构（通常围绕一些关键的机制），同时，也是一组固定地作用于构件层次机制的策略
- 概念框架的互操作设计包括系统体系结构连接的所有框架间的互操作的规则
- 构件是一组通常需要同时部署的原子构件。构件和原子构件之间的区别在于大多数原子构件永远都不会被单独部署，尽管它们可以被单独部署
- 一个原子构件是一个模块和一组资源
- 模块是一组类和可能的非面向对象的结构提，比如过程或者函数
- 资源是一个类型化的项的固定集合
- 资源这个概念可以包含代码资源，进而包含模块。问题在于除了编译器编译一个模块或包生成的资源外，还可能存在其他的资源。在“纯对象”的方法中，资源是外部的不可改变的对象，不可改变是因为构件没有持久化的标志，而且复制不能被区分

### 构件标准

![ ](/img/softExamination/77.jpg)

#### CORBA

![ ](/img/softExamination/78.jpg)

### 中间件

#### 中间件概念

![ ](/img/softExamination/75.jpg)

#### 中间件优点

1. 面向需求。即设计师集中精力于业务逻辑本身
2. 业务的分割和包容性。应用开发人员可以按照不同的业务进行功能的划分，体现为不同的接口或交互模式
3. 设计与实现隔离。构件对外发声作用或构件间的交互，都是通过接口进行的，构件使用者只需要知道构件的接口，而不必关系其内部实现，这是设计与实现分离的关键
4. 隔离复杂的系统资源。架构很重要的一个功能就是将系统资源与应用构件隔离，这是保证构件可复用甚至“即插即用”的基础，与中间件的意图也是一致的
5. 符合标准的交互模型。中间件则实现了架构的模型，实现了标准的协议
6. 软件复用。中间件提供了构件封装、交互规则、与环境的隔离等机制，这些都为软件复用提供了方便的解决方案
7. 提供对应用构件的管理。基于中间件的软件可以方便地进行管理，因为i构件总可以通过标识机制进行划分

#### 中间件分类

![ ](/img/softExamination/76.jpg)

### 软件复用

软件复用【重用】是多次不同的软件开发过程中重复使用相同或相似【软件元素】的过程

#### 构件的复用

- 检索与提取构件
  - 1. 基于关键字的检索
    - 特点：树形或有向无回路图结构
  - 2. 刻面检索法
    - 特点：利用Facet描述构件执行的功能、被操作的数据、构件应用的语境或任意其他特征
    - 例如：分多个刻面：1、应用领域；2、使用环境；3、功能
  - 3. 超文本检索法
    - 特点：按照人类的联想思维方式任意跳转到包含相关概念或构件的文档
- 理解与评价构件
  - 1. 要复用构件，准确地理解构件至关重要。特别是对构件修改使用时
  - 2. 为达到目的，必须要求构件的开发过程遵循公共标准
  - 3. 一般构件库的文档中全面而准确地说明一下内容：构件的功能与行为、相关的领域知识、可适应性约束条件与例外情形、可以预见的修改部分及修改方法
- 修改构件
  - 1. 理想状态时直接复用构件库中现成的构件，但大多数情况下，必须对构件进行或多或少的修改，以应对新需求
  - 2. 为了减少构件修改的工作量，要求开发人员尽量使构件的功能、行为和接口设计更为抽象化、通用化和参数化。这样，复用者即可通过对实参的选取来调整构件的功能或行为。如果这种调整仍不足以使构件适用于新系统，复用者就必须借助设计信息和文档来修改构件
  - 3. 构件库中若无可修改使用的构件，则按需求开发构件，并存入构件库
- 组装构件
  - 组装的三种方式
    - 1. 基于功能的组装：采用子程序调用和参数传递的方式将构件组装起来
    - 2. 基于数据的组装：仍然使传统的子程序调用与参数传递。但它所依赖的软件设计方法不再是功能分解，而是面向数据的设计方式，例如，Jackson系统开发方法
    - 3. 面向对象的组装：如果从类库中检索出来的基类能够完全满足新系统的需求，则可以直接应用。否则，必须以基类为父类，生成响应的子类，以满足新系统的需求
  - 构件组装失配问题
    - 1. 由构件引起的失配，包括由于系统对构件基础设施、构件控制模型和构件数据模型的假设存在冲突引起的失配
    - 2. 由连接子引起的失配，包括由于系统对构件交互协议、连接子数据模型的假设存在冲突引起的失配
    - 3. 由于系统成分对全局体系结构的假设存在冲突引起的失配等。要解决失配问题，首先需要检测出失配问题，并再次基础上通过适当的手段消除检测出的失配问题
